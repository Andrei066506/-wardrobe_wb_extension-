# Wardrobe - Сервис подбора образов для Wildberries

Chrome расширение для автоматического подбора образов одежды на основе выбранного товара на Wildberries.

## Описание

Сервис анализирует якорный товар (куртка, брюки, обувь и т.д.) и рекомендует совместимые товары для создания полного образа. Система учитывает:
- Пол (мужской/женский/унисекс)
- Возраст (взрослый/детский)
- Сезон (зима/лето/весна/осень/всесезонный)
- Стиль (casual/sport/office/elegant/streetwear)
- Категорию товара

## Структура проекта

```
Warderobe/
├── Backend/              # Flask API сервер
│   ├── app.py           # Основной файл приложения
│   ├── app_reserve_1.py # Резервная копия версии 1
│   ├── app_reserve_2.py # Резервная копия версии 2
│   ├── wb_client.py     # Клиент для работы с WB API
│   ├── wb_image_loader.py # Загрузка изображений с WB
│   └── requirements.txt  # Python зависимости
├── ML/                   # ML модуль (LLM обогащение)
│   ├── llm_enrich.py    # Обогащение товаров через LLM
│   └── .env             # Токен для LLM (не коммитится)
├── wb_extention/         # Chrome расширение
│   ├── manifest.json    # Манифест расширения
│   ├── content.js       # Content script для WB страниц
│   └── popup.js         # Popup интерфейс
└── Frontend/             # Демо фронтенд (опционально)
    └── index.html
```

## Установка и запуск

### 1. Backend (Flask API)

```bash
cd Backend
pip install -r requirements.txt
python app.py
```

Сервер запустится на `http://localhost:5000`

### 2. Chrome расширение

1. Откройте Chrome → Расширения → Режим разработчика
2. Нажмите "Загрузить распакованное расширение"
3. Выберите папку `wb_extention`
4. Расширение установлено

### 3. ML модуль (опционально)

Для использования LLM обогащения:
1. Создайте файл `ML/.env` с содержимым:
   ```
   JWT_TOKEN=your_token_here
   ```
2. LLM модуль будет автоматически использоваться при наличии токена

## Использование

1. Откройте страницу товара на Wildberries (например: `https://www.wildberries.ru/catalog/554742394/detail.aspx`)
2. Нажмите кнопку "Подобрать образ" рядом с названием товара
3. Система сгенерирует 3 капсулы с рекомендациями

## Особенности

- **Определение пола**: Использует LLM, hints со страницы WB, и эвристики для определения пола товара
- **Фильтрация по стилю**: Строгая фильтрация для элегантных/офисных образов (исключает спортивные, охотничьи, камуфляжные товары)
- **Специальная обработка платьев**: Для платьев рекомендуются только верхняя одежда и обувь
- **Кэширование**: LLM результаты кэшируются для оптимизации

## Резервные версии

- `app_reserve_1.py` - Версия с базовой фильтрацией по полу, сезону и категориям
- `app_reserve_2.py` - Версия с улучшенным определением пола через LLM и эвристики

## Технологии

- **Backend**: Flask, Python 3.12+
- **Frontend**: Vanilla JavaScript
- **ML**: OpenAI-compatible LLM (Meta-Llama-3-70B-Instruct-GPTQ)
- **API**: Wildberries Search API

## Лицензия

Внутренний проект для демонстрации.
